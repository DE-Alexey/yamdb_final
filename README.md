# api_yamdb
![example workflow](https://github.com/DE-Alexey/yamdb_final
/actions/workflows/main.yml/badge.svg)
## Описание
В данном проекте реализовано приложение Review и API для всех его моделей. Пользователям предоставляется возможность оставлять отзывы на различные произведения, присутствующие на ресурсе. А также комментировать отзывы других пользователей.
Реализована аутентификация по токен TokenAuthentication по email. Аутентифицированный пользователь авторизован на изменение и удаление своего контента; в остальных случаях доступ предоставляется только для чтения.
Также реализованы классы Администратора и Модератора. Администратор обладает правами добавления произведений и модерации контента других пользователей. Модератор только следит за контентом созданным другими пользователями.

### Функционал
* Просмотр списка произведений, их средюню оценку отзывов на них и комментариев к отзывам
* Просмотр информации об отдельно взятом произведении, отзыве или комментарии

#### После регистрации в API, пользователю доступны:
* Создание и удаление отзывов на произведения
* Частичное и полное редактирование отзывов
* Создание и удаление комментариев
* Частичное и полное редактирование комментариев
* Возможность оставлять оценки на произведения

### В проекте используются:
* ##### Django v. 3.2
* ##### Django Rest Framework v. 3.12.4
* ##### Nginx
* ##### Docker-compose

## Установка

Для запуска приложения проделайте следующие шаги:

1. Склонируйте репозиторий.
2. Перейдити в папку infra и запустите docker-compose.yaml (при установленном и запущенном Docker)
```
docker-compose up
```
3. Для пересборки контейнеров выполните команду:
```
docker-compose up -d --build
```
4. В контейнере web выполните миграции:
```
docker-compose exec web python manage.py migrate
```
5. Создатйте суперпользователя:
```
docker-compose exec web python manage.py createsuperuser
```
6. Соберите статику:
```
docker-compose exec web python manage.py collectstatic --no-input
```
Проект запущен и доступен по адресу: [localhost](http://localhost/admin/)

## Загрузка тестовых значений в БД

Чтобы загрузить тестовые значения в базу данных перейдите в каталог проекта и скопируйте файл базы данных в контейнер приложения:
```
docker cp <DATA BASE> <CONTAINER ID>:/app/<DATA BASE>
```
Перейдите в контейнер приложения и загрузить данные в БД: 
```
docker container exec -it <CONTAINER ID> bash
python manage.py loaddata <DATA BASE>
```
  


##### Над проектом работали:
* [Алексей Гонцов](https://github.com/DE-Alexey)